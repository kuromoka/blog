---
Title: PHPカンファレンス2018に参加したり聞いてきたりした
Category:
- 勉強会参加・登壇
Date: 2018-12-18T07:42:54+09:00
URL: https://kuromoka16.hatenablog.jp/entry/2018/12/18/074254
EditURL: https://blog.hatena.ne.jp/kuromoka16/kuromoka16.hatenablog.jp/atom/entry/10257846132686354959
---

今年もPHPカンファレンスに参加してきたので、1年ぶりくらいにブログを書きます。（実は今年関西にも行っているんですが書いてない＼(^o^)／）
[http://phpcon.php.gr.jp/2018/:embed:cite]

当日だらだらしていて会場自体に着いたのは午後なので、YouTubeの配信((http://phpcon.php.gr.jp/2018/#live のアーカイブから。後にセッションごとに分割された動画がアップされるようです。)) で見たのも含んで、印象に残ったセッションの感想です。
自分のメモを元に感想を書いているので、もし内容に間違いがあったらすいません 🙏

<!-- more -->

## LaravelでTDDを体験しよう
<script async class="speakerdeck-embed" data-id="609eecad78774defb62703abe50b0300" data-ratio="1.33333333333333" src="//speakerdeck.com/assets/embed.js"></script>

- 概念的な説明というよりかは、実際のアプリに対して具体的にどのような感じでテストコードを書いてTDDしていくかという点がメイン（に感じた）
  - TDDに対する知識がまだまだ浅いので、この形式は分かりやすかった。
- 普段はVSCode使いだが、PhpStormで楽にTDDしている様子を見て使いたくなった。
- TDDでリズム（？）を感じれるようになりたい。
- `RefreshDatabase` トレイトというのがLaravelにあって、Seederのデータ破棄とかを自動でやってくれるらしい。
  - [https://readouble.com/laravel/5.7/ja/database-testing.html:title]

## Cygamesにおける長期運用タイトルのこれまでとこれから 〜 負荷対策とPHP7への道 〜
スライド見つからず

- 運用・バージョンアップ・負荷対策という観点で、具体的な例を交えながらのセッション
  - 特に負荷対策の話は一番参考になった。
  - ランチセッションとのことでしたが良い意味でご飯食べながら聞くような内容ではないと思いますｗ（自分は前述のYouTubeで見た）
- PHP5.6から7.2にバージョンアップ
  - 5.6と7.2の両方で動くような方針でやったらしい
    - 確かにいきなり7.2でしか動かないようなコードだとなにかあったときに面倒なので、この方針はいいかも
  - 静的解析ツールはPHPCompatibility・PHPCompatibility・Phanを使っていた。
  - 目視でも確認
- 負荷対策
  - 以下の2ツールを使って、その結果を元にした具体的な負荷対策の話。どちらも知らないツールだったので導入してみたい（個人でも使えるんだろうか）
    - New Relic
    - Xhprof
  - 負荷対策した結果の可視化（グラフ化）やノウハウを共有したほうがよい

## PHP,Go,Elasticsearchによる、@cosmeを5倍速くする取り組み
スライド見つからず

- 一部画面をマイクロサービスを取り入れて早くした話
  - ElasticsearchやGoなど全体的に使ったことがない技術が多く個人的にはちょっと難易度高めだったので、このレベルの話が理解できるようになっていきたい。
- マイクロサービス化にするにあたって既存動作を担保することが大変そうな印象
  - 仕様が不透明で聞いても分かる人がいなかったりするようで、コードを読み解く必要があったみたい
  - 最終的には、現在の画面とマイクロサービスを使用した画面のDOMの比較を自作ツールで取ったらしい
    - 最終奥義な感じもあるがコードを読み解く手間などを考えると、ある意味証明手段としては一番いいのかな

## PHPでのgRPCクライアント作成とユースケース
<script async class="speakerdeck-embed" data-id="e5f35e78d62b491e9abada54456349b2" data-ratio="1.33333333333333" src="//speakerdeck.com/assets/embed.js"></script>

- 恥ずかしながら単純に「gRPC」というワードを知らなかったので聞いてきた
- PHPでgRPCサーバは難しいらしい。クライアント側は実装は楽らしいが、動かすまでの環境構築がちょっと面倒そう
- 今はRESTでのAPIがまだまだ主流なはずで、直近でgRPCに関わることはなさそうだがキャッチアップはしていったほうがいいかも

## PHPバージョンアップと決済テストを支えたユニットテスト
<script async class="speakerdeck-embed" data-id="153d27669df24c5aa7f1ba7eb93b56ac" data-ratio="1.33333333333333" src="//speakerdeck.com/assets/embed.js"></script>

- テストコードがないコードはテストしにくいコードであること多い、という点に全力で同意
- runkitを新規実装のテストコードでは使わない方針にするというのも良いアプローチだと思った。
- テストを書く人・書かない人
  - 知見共有などの対策が書いているが、これはほんとに差が出る部分なのでなかなか難しい問題だと思う
- テストコードも順次リファクタリングしていくべき

## LT
遺憾コード 😂  
[https://www.slideshare.net/m_norii/20181215-phpcon2018]

## 感想
去年に比べPHPのバージョンアップ系の話が多かった印象でした。5.6系のセキュリティサポートが切れる ((https://qiita.com/bezeklik/items/72d1ff8393f66673e2bc )) がもうすぐ切れるのとも関係はありそうですね。  
来年は東京は2019年12月1日とのことですが、以下を見ると地方開催が多め？
例年は関西には行っているんですが、もし都合があえば他地域にも行ってみたいですね。

[https://qiita.com/akase244/items/d74316f6ee8fa464cfa3:embed:cite]










